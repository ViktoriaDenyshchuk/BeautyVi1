@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Identity.EntityFrameworkCore
@using BeautyVi.Core.Entities;
@using System.Security.Claims;

@model Product

@{
    ViewData["Title"] = Model.Name;
}

<div class="container mt-5 mb-5">
    <div class="card shadow-lg" style="border: 1px solid #e3e3e3; border-radius: 8px; background-color: #fdf8f4;">
        <!-- Зображення продукту -->
        <img src="@Model.CoverPath" class="card-img-top" alt="@Model.Name" style="border-top-left-radius: 8px; border-top-right-radius: 8px; height: 300px; object-fit: cover;">

        <!-- Інформація про продукт -->
        <div class="card-body" style="padding: 20px;">
            <h2 class="text-center text-uppercase" style="color: #7a6f5b; font-family: 'Playfair Display', serif;">@Model.Name</h2>
            <hr />

            <!-- Категорія -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Категорія:</strong>
                @if (Model.Category != null)
                {
                    <span style="color: #7a6f5b;">@ViewBag.OwnerCategory</span>
                }
                else
                {
                    <span style="color: #d9534f;">Категорія не визначена</span>
                }
            </div>

            <!-- Тип ефекту -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Тип ефекту:</strong>
                @if (Model.EffectType != null)
                {
                    <span style="color: #7a6f5b;">@Model.EffectType.NameEffectType</span>
                }
                else
                {
                    <span style="color: #d9534f;">Тип ефекту не визначений</span>
                }
            </div>

            <!-- Підходить для -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Підходить для:</strong>
                @if (Model.SuitableFor != null)
                {
                    <span style="color: #7a6f5b;">@Model.SuitableFor.NameSuitableFor</span>
                }
                else
                {
                    <span style="color: #d9534f;">Інформація не доступна</span>
                }
            </div>

            <!-- Склад -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Опис:</strong>
                <p style="color: #7a6f5b;">@Model.Description</p>
            </div>

            <!-- Інгредієнти -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Склад:</strong>
                @if (Model.ProductIngredients != null && Model.ProductIngredients.Any())
                {
                    <ul style="list-style-type: disc; padding-left: 20px; color: #7a6f5b;">
                        @foreach (var ingredient in Model.ProductIngredients)
                        {
                            <li>@ingredient.Ingredient.Name</li>
                        }
                    </ul>
                }
                else
                {
                    <span style="color: #d9534f;">Інформація не доступна</span>
                }
            </div>

            <!-- Алергени -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Алергени:</strong>
                @if (Model.ProductAllergens != null && Model.ProductAllergens.Any())
                {
                    <ul style="list-style-type: disc; padding-left: 20px; color: #7a6f5b;">
                        @foreach (var allergen in Model.ProductAllergens)
                        {
                            <li>@allergen.Allergen.Name</li>
                        }
                    </ul>
                }
                else
                {
                    <span style="color: #d9534f;">Інформація не доступна</span>
                }
            </div>

            <!-- Ціна -->
            <div class="mb-3">
                <strong style="color: #4a4a4a;">Ціна:</strong>
                <span style="color: #7a6f5b;">@Model.Price грн</span>
            </div>

            <!-- Кнопки -->
            <div class="d-flex justify-content-between mt-4">
                <a href="@Url.Action("Index", "Product")" class="btn"
                   style="background-color: transparent; color: #4a4a4a; border: 2px solid #4a4a4a; text-transform: uppercase; font-weight: bold;">
                    Назад до списку
                </a>
                <a href="@Url.Action("Create", "Order", new { productId = Model.Id, nameOrder = Model.Name, price = Model.Price })" class="btn"
                   style="background-color: #7a6f5b; color: #fff; text-transform: uppercase; font-weight: bold;">
                    Зробити замовлення
                </a>
            </div>
            <div class="text-center mt-4">
                <a href="@Url.Action("Edit", "Product", new { id = Model.Id })" class="btn"
                   style="background-color: transparent; color: #7a6f5b; border: 2px solid #7a6f5b; text-transform: uppercase; font-weight: bold;">
                    Редагувати
                </a>
                <a href="@Url.Action("Delete", "Product", new { id = Model.Id })" class="btn"
                   style="background-color: transparent; color: #d9534f; border: 2px solid #d9534f; text-transform: uppercase; font-weight: bold;">
                    Видалити
                </a>
                </div>
            </div>
        </div>
</div>
